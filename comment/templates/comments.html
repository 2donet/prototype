{% for comment in comments %}
<div class="comment" data-comment-id="{{ comment.id }}">
    <strong>
        {% if comment.user %}
            {{ comment.user.username }}
        {% else %}
            Anonymous
        {% endif %}
    </strong>: {{ comment.content }}
    <br>
    <button class="reply-btn" data-comment-id="{{ comment.id }}">Reply</button>
    <span>{{ comment.total_replies }} replies</span>
    <button class="view-replies-btn" data-comment-id="{{ comment.id }}">View Replies</button>
    <div class="replies-container" data-comment-id="{{ comment.id }}" style="display: none;">
        {% include "comments.html" with comments=comment.replies.all %}
    </div>
</div>
{% endfor %}