{% block connection %}
{% load static %}

<div class="connections-container">
        <span class="card-title">ðŸ”„ Project Connections</span>
        
        <!-- Tabs for different connection types -->
        <ul class="tabs connection-tabs">
            <li class="tab"><a class="active" href="#versions-tab">Versions</a></li>
            <li class="tab"><a href="#forks-tab">Forks</a></li>
            <li class="tab"><a href="#linked-tab">Linked</a></li>
            <li class="tab"><a href="#merge-requests-tab">Merge Requests</a></li>
        </ul>
        
        <!-- Versions Tab -->
        <div id="versions-tab" class="connection-tab-content card">
            <!-- Version creation button -->
            <div class="connection-actions">
                <a href="#create-version-modal" class="btn waves-effect waves-light modal-trigger green">
                    <i class="material-icons left">add</i>Create New Version
                </a>
            </div>
            
            <!-- Versions list -->
            <div class="versions-list">
                <h5>Available Versions</h5>
                
                <!-- Empty state -->
                <div class="empty-list-message">
                    <p>No versions found for this project.</p>
                </div>
                
                <!-- Version list item (sample) -->
                <div class="connection-item version-item" style="display: none;">
                    <div class="connection-header">
                        <div class="connection-title">
                            <a href="/project/123">Version: "Development branch"</a>
                            <span class="badge green white-text">v1.2</span>
                        </div>
                        <div class="connection-meta">
                            <span class="connection-date">Created 3 days ago</span>
                            <span class="connection-author">by <a href="/u/456">JohnDoe</a></span>
                        </div>
                        <div class="connection-actions dropdown-trigger" data-target="version-actions-123">
                            <i class="material-icons">more_vert</i>
                        </div>
                        <ul id="version-actions-123" class="dropdown-content">
                            <li><a href="/project/123"><i class="material-icons">visibility</i>View Version</a></li>
                            <li><a href="/connection/789"><i class="material-icons">info</i>Connection Details</a></li>
                            <li><a href="#comparison-modal" class="modal-trigger"><i class="material-icons">compare_arrows</i>Compare with Current</a></li>
                            <li><a href="#merge-modal" class="modal-trigger"><i class="material-icons">merge_type</i>Create Merge Request</a></li>
                            <li class="divider"></li>
                            <li><a href="#" class="red-text"><i class="material-icons red-text">delete</i>Delete Version</a></li>
                        </ul>
                    </div>
                    <div class="connection-description">
                        <p>This version focuses on implementing the new user interface.</p>
                    </div>
                    <div class="connection-footer">
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#connection-info-123">
                            <span>Nv</span>
                            <i class="right"><img src="{% static 'icons/users.svg' %}" alt="Users"></i>
                        </a>
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#connection-comments-123">
                            <span>Nc</span>
                            <i class="right"><img src="{% static 'icons/comments.svg' %}" alt="Comments"></i>
                        </a>
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#connection-changes-123">
                            <span>Nd</span>
                            <i class="right"><img src="{% static 'icons/changes.svg' %}" alt="Changes"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Forks Tab -->
        <div id="forks-tab" class="connection-tab-content card">
            <!-- Fork creation button -->
            <div class="connection-actions">
                <a href="#create-fork-modal" class="btn waves-effect waves-light modal-trigger blue">
                    <i class="material-icons left">call_split</i>Fork This Project
                </a>
            </div>
            
            <!-- Forks list -->
            <div class="forks-list">
                <h5>Project Forks</h5>
                
                <!-- Empty state -->
                <div class="empty-list-message">
                    <p>No forks found for this project.</p>
                </div>
                
                <!-- Fork list item (sample) -->
                <div class="connection-item fork-item" style="display: none;">
                    <div class="connection-header">
                        <div class="connection-title">
                            <a href="/project/456">Fork: "Feature exploration"</a>
                        </div>
                        <div class="connection-meta">
                            <span class="connection-date">Created 5 days ago</span>
                            <span class="connection-author">by <a href="/u/789">JaneDoe</a></span>
                        </div>
                        <div class="connection-actions dropdown-trigger" data-target="fork-actions-456">
                            <i class="material-icons">more_vert</i>
                        </div>
                        <ul id="fork-actions-456" class="dropdown-content">
                            <li><a href="/project/456"><i class="material-icons">visibility</i>View Fork</a></li>
                            <li><a href="/connection/101"><i class="material-icons">info</i>Connection Details</a></li>
                            <li><a href="#comparison-modal" class="modal-trigger"><i class="material-icons">compare_arrows</i>Compare with Current</a></li>
                        </ul>
                    </div>
                    <div class="connection-description">
                        <p>Experimental fork to test new features without affecting the main project.</p>
                    </div>
                    <div class="connection-footer">
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#fork-info-456">
                            <span>Nu</span>
                            <i class="right"><img src="{% static 'icons/users.svg' %}" alt="Users"></i>
                        </a>
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#fork-comments-456">
                            <span>Nc</span>
                            <i class="right"><img src="{% static 'icons/comments.svg' %}" alt="Comments"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Linked Projects Tab -->
        <div id="linked-tab" class="connection-tab-content card">
            <!-- Link creation button -->
            <div class="connection-actions">
                <a href="#create-link-modal" class="btn waves-effect waves-light modal-trigger purple">
                    <i class="material-icons left">link</i>Link to Another Project
                </a>
            </div>
            
            <!-- Linked projects list -->
            <div class="linked-list">
                <h5>Linked Projects</h5>
                
                <!-- Empty state -->
                <div class="empty-list-message">
                    <p>No linked projects found.</p>
                </div>
                
                <!-- Linked project item (sample) -->
                <div class="connection-item linked-item" style="display: none;">
                    <div class="connection-header">
                        <div class="connection-title">
                            <a href="/project/789">Linked: "Backend API Project"</a>
                            <span class="badge orange white-text">Bidirectional</span>
                        </div>
                        <div class="connection-meta">
                            <span class="connection-date">Linked 10 days ago</span>
                            <span class="connection-author">by <a href="/u/123">AdminUser</a></span>
                        </div>
                        <div class="connection-actions dropdown-trigger" data-target="linked-actions-789">
                            <i class="material-icons">more_vert</i>
                        </div>
                        <ul id="linked-actions-789" class="dropdown-content">
                            <li><a href="/project/789"><i class="material-icons">visibility</i>View Project</a></li>
                            <li><a href="/connection/202"><i class="material-icons">info</i>Connection Details</a></li>
                            <li class="divider"></li>
                            <li><a href="#" class="red-text"><i class="material-icons red-text">link_off</i>Remove Link</a></li>
                        </ul>
                    </div>
                    <div class="connection-description">
                        <p>This project provides the API endpoints for our frontend.</p>
                    </div>
                    <div class="connection-footer">
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#link-comments-789">
                            <span>Nc</span>
                            <i class="right"><img src="{% static 'icons/comments.svg' %}" alt="Comments"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Merge Requests Tab -->
        <div id="merge-requests-tab" class="connection-tab-content card">
            <div class="merge-requests-list">
                <h5>Pending Merge Requests</h5>
                
                <!-- Empty state -->
                <div class="empty-list-message">
                    <p>No merge requests pending.</p>
                </div>
                
                <!-- Merge request item (sample) -->
                <div class="connection-item merge-request-item" style="display: none;">
                    <div class="connection-header">
                        <div class="connection-title">
                            <a href="/merge-request/303">MR #303: "Add user authentication"</a>
                            <span class="badge blue white-text">Open</span>
                        </div>
                        <div class="connection-meta">
                            <span class="connection-date">Requested 2 days ago</span>
                            <span class="connection-author">by <a href="/u/456">JohnDoe</a></span>
                            <span class="connection-source">from <a href="/project/123">Version v1.2</a></span>
                        </div>
                        <div class="connection-actions dropdown-trigger" data-target="merge-actions-303">
                            <i class="material-icons">more_vert</i>
                        </div>
                        <ul id="merge-actions-303" class="dropdown-content">
                            <li><a href="/merge-request/303"><i class="material-icons">visibility</i>View Request</a></li>
                            <li><a href="#comparison-modal" class="modal-trigger"><i class="material-icons">compare_arrows</i>See Changes</a></li>
                            <li class="divider"></li>
                            <li><a href="#" class="green-text"><i class="material-icons green-text">check</i>Approve & Merge</a></li>
                            <li><a href="#" class="red-text"><i class="material-icons red-text">close</i>Reject Request</a></li>
                        </ul>
                    </div>
                    <div class="connection-description">
                        <p>This merge request implements the user authentication system with email verification.</p>
                    </div>
                    <div class="connection-footer">
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#merge-reviews-303">
                            <span>Nr</span>
                            <i class="right"><img src="{% static 'icons/reviews.svg' %}" alt="Reviews"></i>
                        </a>
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#merge-comments-303">
                            <span>Nc</span>
                            <i class="right"><img src="{% static 'icons/comments.svg' %}" alt="Comments"></i>
                        </a>
                        <a class="waves-effect waves-light btn-flat connection-info-trigger" href="#merge-changes-303">
                            <span>Nd</span>
                            <i class="right"><img src="{% static 'icons/changes.svg' %}" alt="Changes"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
</div>

<!-- Modals -->

<!-- Create Version Modal -->
<div id="create-version-modal" class="modal">
    <div class="modal-content">
        <h4>Create New Version</h4>
        <form id="create-version-form">
            {% csrf_token %}
            <div class="input-field">
                <input id="version-name" type="text" class="validate" required>
                <label for="version-name">Version Name</label>
            </div>
            
            <div class="input-field">
                <textarea id="version-description" class="materialize-textarea"></textarea>
                <label for="version-description">Description</label>
            </div>
            
            <div class="input-field">
                <input id="version-tag" type="text" class="validate">
                <label for="version-tag">Version Tag (optional)</label>
                <span class="helper-text">Example: v1.0, beta, prototype</span>
            </div>
            
            <h5>Access Settings</h5>
            
            <p>
                <label>
                    <input name="inherit-settings" type="radio" checked />
                    <span>Inherit from original project</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="inherit-settings" type="radio" />
                    <span>Private (only you)</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="inherit-settings" type="radio" />
                    <span>Custom settings</span>
                </label>
            </p>
            
            <div id="custom-settings-section" style="display: none;">
                <div class="input-field">
                    <select id="visibility-setting">
                        <option value="public">Public</option>
                        <option value="logged_in">Only Logged-In Users</option>
                        <option value="restricted">Restricted (Added Users Only)</option>
                        <option value="private">Private</option>
                    </select>
                    <label>Visibility</label>
                </div>
                
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" id="inherit-members" />
                        <span>Include original project members</span>
                    </label>
                </p>
                
                <div class="input-field">
                    <input id="add-members" type="text" class="validate">
                    <label for="add-members">Add Members (comma-separated usernames)</label>
                </div>
            </div>
            
            <h5>Content to Include</h5>
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="include-tasks" checked />
                    <span>Tasks</span>
                </label>
            </p>
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="include-needs" checked />
                    <span>Needs</span>
                </label>
            </p>
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="include-comments" />
                    <span>Comments</span>
                </label>
            </p>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-light btn-flat">Cancel</a>
        <button form="create-version-form" type="submit" class="waves-effect waves-light btn green">Create</button>
    </div>
</div>

<!-- Create Fork Modal -->
<div id="create-fork-modal" class="modal">
    <div class="modal-content">
        <h4>Fork This Project</h4>
        <form id="create-fork-form">
            {% csrf_token %}
            <div class="input-field">
                <input id="fork-name" type="text" class="validate" required>
                <label for="fork-name">Fork Name</label>
            </div>
            
            <div class="input-field">
                <textarea id="fork-description" class="materialize-textarea"></textarea>
                <label for="fork-description">Description</label>
            </div>
            
            <h5>Access Settings</h5>
            <p>
                <label>
                    <input name="fork-visibility" type="radio" value="public" checked />
                    <span>Public</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="fork-visibility" type="radio" value="private" />
                    <span>Private</span>
                </label>
            </p>
            
            <h5>Content to Include</h5>
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="fork-include-tasks" checked />
                    <span>Tasks</span>
                </label>
            </p>
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="fork-include-needs" checked />
                    <span>Needs</span>
                </label>
            </p>
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="fork-include-comments" />
                    <span>Comments</span>
                </label>
            </p>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-light btn-flat">Cancel</a>
        <button form="create-fork-form" type="submit" class="waves-effect waves-light btn blue">Fork Project</button>
    </div>
</div>

<!-- Create Link Modal -->
<div id="create-link-modal" class="modal">
    <div class="modal-content">
        <h4>Link to Another Project</h4>
        <form id="create-link-form">
            {% csrf_token %}
            <div class="input-field">
                <input id="project-search" type="text" class="autocomplete validate" required>
                <label for="project-search">Search for a project</label>
            </div>
            
            <div id="selected-project" class="card-panel" style="display: none;">
                <h5 id="selected-project-name">Project Name</h5>
                <p id="selected-project-desc">Project description will appear here.</p>
                <input type="hidden" id="selected-project-id" name="project_id">
            </div>
            
            <h5>Link Type</h5>
            <p>
                <label>
                    <input name="link-type" type="radio" value="linked" checked />
                    <span>Bidirectional (both projects link to each other)</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="link-type" type="radio" value="parent" />
                    <span>Parent (selected project is parent of this project)</span>
                </label>
            </p>
            <p>
                <label>
                    <input name="link-type" type="radio" value="child" />
                    <span>Child (selected project is child of this project)</span>
                </label>
            </p>
            
            <div class="input-field">
                <textarea id="link-description" class="materialize-textarea"></textarea>
                <label for="link-description">Link Description</label>
                <span class="helper-text">Explain why these projects are linked</span>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-light btn-flat">Cancel</a>
        <button form="create-link-form" type="submit" class="waves-effect waves-light btn purple">Create Link</button>
    </div>
</div>

<!-- Comparison Modal -->
<div id="comparison-modal" class="modal modal-large">
    <div class="modal-content">
        <h4>Compare Changes</h4>
        
        <div class="comparison-header">
            <div class="comparison-source">
                <h5>Original</h5>
                <p>Current Project</p>
            </div>
            <div class="comparison-target">
                <h5>Version/Fork</h5>
                <p id="comparison-target-name">Version: Development Branch</p>
            </div>
        </div>
        
        <!-- Comparison tabs -->
        <ul class="tabs comparison-tabs">
            <li class="tab"><a class="active" href="#overview-tab">Overview</a></li>
            <li class="tab"><a href="#details-tab">Detailed Changes</a></li>
            <li class="tab"><a href="#tasks-tab">Tasks Changes</a></li>
            <li class="tab"><a href="#needs-tab">Needs Changes</a></li>
        </ul>
        
        <!-- Overview tab -->
        <div id="overview-tab" class="comparison-tab-content">
            <div class="comparison-summary">
                <div class="summary-item">
                    <span class="summary-count added">+15</span>
                    <span class="summary-label">Additions</span>
                </div>
                <div class="summary-item">
                    <span class="summary-count modified">10</span>
                    <span class="summary-label">Modifications</span>
                </div>
                <div class="summary-item">
                    <span class="summary-count removed">-3</span>
                    <span class="summary-label">Removals</span>
                </div>
            </div>
            
            <div class="comparison-changes-overview">
                <h6>Major Changes</h6>
                <ul class="collection">
                    <li class="collection-item">
                        <span class="badge green">Added</span>
                        New user authentication system
                    </li>
                    <li class="collection-item">
                        <span class="badge orange">Modified</span>
                        Project description and goals
                    </li>
                    <li class="collection-item">
                        <span class="badge red">Removed</span>
                        Legacy payment processing task
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Detailed changes tab -->
        <div id="details-tab" class="comparison-tab-content">
            <div class="comparison-details">
                <div class="comparison-item">
                    <div class="comparison-item-header">
                        <h6>Project Description</h6>
                        <span class="badge orange">Modified</span>
                    </div>
                    <div class="comparison-item-content">
                        <div class="original-content">
                            <h6>Original</h6>
                            <p>This project aims to create a platform for collaborative task management.</p>
                        </div>
                        <div class="new-content">
                            <h6>New Version</h6>
                            <p>This project aims to create a platform for collaborative task management with built-in authentication and permission systems.</p>
                        </div>
                    </div>
                </div>
                
                <!-- More comparison items would go here -->
            </div>
        </div>
        
        <!-- Tasks changes tab -->
        <div id="tasks-tab" class="comparison-tab-content">
            <table class="striped">
                <thead>
                    <tr>
                        <th>Task Name</th>
                        <th>Change Type</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Implement Login System</td>
                        <td><span class="badge green">Added</span></td>
                        <td><a href="#" class="modal-trigger">View Details</a></td>
                    </tr>
                    <tr>
                        <td>Design User Interface</td>
                        <td><span class="badge orange">Modified</span></td>
                        <td><a href="#" class="modal-trigger">View Changes</a></td>
                    </tr>
                    <tr>
                        <td>Legacy Payment Processing</td>
                        <td><span class="badge red">Removed</span></td>
                        <td>-</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Needs changes tab -->
        <div id="needs-tab" class="comparison-tab-content">
            <table class="striped">
                <thead>
                    <tr>
                        <th>Need Name</th>
                        <th>Change Type</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Frontend Developer</td>
                        <td><span class="badge green">Added</span></td>
                        <td><a href="#" class="modal-trigger">View Details</a></td>
                    </tr>
                    <tr>
                        <td>UI/UX Designer</td>
                        <td><span class="badge orange">Modified</span></td>
                        <td><a href="#" class="modal-trigger">View Changes</a></td>
                    </tr>
                    <tr>
                        <td>Legacy System Expert</td>
                        <td><span class="badge red">Removed</span></td>
                        <td>-</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-light btn-flat">Close</a>
        <a href="#merge-modal" class="modal-close modal-trigger waves-effect waves-light btn blue">Create Merge Request</a>
    </div>
</div>

<!-- Merge Request Modal -->
<div id="merge-modal" class="modal">
    <div class="modal-content">
        <h4>Create Merge Request</h4>
        <form id="create-merge-form">
            {% csrf_token %}
            <div class="input-field">
                <input id="merge-title" type="text" class="validate" required>
                <label for="merge-title">Title</label>
                <span class="helper-text">Briefly describe what changes you're proposing</span>
            </div>
            
            <div class="input-field">
                <textarea id="merge-description" class="materialize-textarea" required></textarea>
                <label for="merge-description">Description</label>
                <span class="helper-text">Explain the changes and why they should be merged</span>
            </div>
            
            <h5>Changes to Include</h5>
            
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="merge-all-changes" checked />
                    <span>All Changes</span>
                </label>
            </p>
            
            <div id="selective-changes" style="display: none;">
                <!-- Selective changes options would be populated dynamically -->
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" checked />
                        <span>Project Description Updates</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" checked />
                        <span>New Authentication System</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" checked />
                        <span>UI Design Changes</span>
                    </label>
                </p>
            </div>
            
            <div class="input-field">
                <select id="merge-reviewers">
                    <option value="" disabled selected>Choose reviewers (optional)</option>
                    <option value="user1">John Doe</option>
                    <option value="user2">Jane Smith</option>
                    <option value="user3">Alex Johnson</option>
                </select>
                <label>Reviewers</label>
            </div>
            
            <p>
                <label>
                    <input type="checkbox" class="filled-in" id="merge-close-after" />
                    <span>Close this version after merging</span>
                </label>
            </p>
        </form>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-light btn-flat">Cancel</a>
        <button form="create-merge-form" type="submit" class="waves-effect waves-light btn green">Submit Merge Request</button>
    </div>
</div>

<!-- Version Tree Visualization -->
<div id="version-tree-modal" class="modal modal-large">
    <div class="modal-content">
        <h4>Project Version Tree</h4>
        
        <div id="version-tree-visualization" class="version-tree">
            <!-- Placeholder for visualization that would be rendered with JS -->
            <div class="version-tree-placeholder">
                <p>Version tree visualization would be displayed here.</p>
                <p>This would show the hierarchical relationship between versions and forks.</p>
            </div>
        </div>
        
        <div class="version-tree-legend">
            <div class="legend-item">
                <span class="legend-color original"></span>
                <span class="legend-label">Original Project</span>
            </div>
            <div class="legend-item">
                <span class="legend-color version"></span>
                <span class="legend-label">Version</span>
            </div>
            <div class="legend-item">
                <span class="legend-color fork"></span>
                <span class="legend-label">Fork</span>
            </div>
            <div class="legend-item">
                <span class="legend-color merged"></span>
                <span class="legend-label">Merged</span>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-light btn-flat">Close</a>
    </div>
</div>


<style>
    /* Connection component styles */
    .connections-container {
        margin: 20px 0;
    }
    
    .connection-tabs {
        margin-bottom: 20px;
        background-color: var(--bg-color2);
    }
    
    .connection-tab-content {
        display: none;
        padding: 15px 0;
    }
    
    .connection-tab-content.active {
        display: block;
    }
    
    .connection-actions {
        margin-bottom: 20px;
    }
    
    .connection-item {
        background-color: var(--bg-light);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        border-left: 4px solid var(--highlight);
    }
    
    .connection-item.version-item {
        border-left-color: #4CAF50; /* Green */
    }
    
    .connection-item.fork-item {
        border-left-color: #2196F3; /* Blue */
    }
    
    .connection-item.linked-item {
        border-left-color: #9C27B0; /* Purple */
    }
    
    .connection-item.merge-request-item {
        border-left-color: #FF9800; /* Orange */
    }
    
    .connection-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 10px;
    }
    
    .connection-title {
        font-weight: bold;
        font-size: 1.1em;
        flex: 1;
    }
    
    .connection-meta {
        color: var(--text2ndary);
        font-size: 0.9em;
        margin: 5px 0;
    }
    
    .connection-actions {
        cursor: pointer;
        padding: 0 5px;
    }
    
    .connection-description {
        margin-bottom: 15px;
        color: var(--text);
    }
    
    .connection-footer {
        display: flex;
        gap: 10px;
    }
    
    .connection-footer a {
        display: flex;
        align-items: center;
    }
    
    .connection-footer a span {
        margin-right: 5px;
    }
    
    .connection-footer a i img {
        width: 18px;
        height: 18px;
    }
    
    /* Empty state */
    .empty-list-message {
        text-align: center;
        padding: 20px;
        color: var(--text2ndary);
        font-style: italic;
    }
    
    /* Badge styles */
    .badge {
        padding: 3px 8px;
        border-radius: 12px;
        font-size: 0.75em;
        margin-left: 10px;
    }
    
    /* Comparison modal styles */
    .modal-large {
        width: 90%;
        max-height: 90%;
    }
    
    .comparison-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }
    
    .comparison-source, .comparison-target {
        flex: 1;
        padding: 0 10px;
    }
    
    .comparison-source h5, .comparison-target h5 {
        margin-bottom: 5px;
    }
    
    .comparison-tabs {
        margin-bottom: 20px;
    }
    
    .comparison-tab-content {
        display: none;
        padding: 15px 0;
    }
    
    .comparison-tab-content.active {
        display: block;
    }
    
    .comparison-summary {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
    }
    
    .summary-item {
        text-align: center;
    }
    
    .summary-count {
        display: block;
        font-size: 2em;
        font-weight: bold;
    }
    
    .summary-count.added {
        color: #4CAF50; /* Green */
    }
    
    .summary-count.modified {
        color: #FF9800; /* Orange */
    }
    
    .summary-count.removed {
        color: #F44336; /* Red */
    }
    
    .summary-label {
        color: var(--text2ndary);
    }
    
    .comparison-changes-overview {
        margin-top: 30px;
    }
    
    .comparison-item {
        margin-bottom: 20px;
        border-bottom: 1px solid var(--bg-color3);
        padding-bottom: 20px;
    }
    
    .comparison-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .comparison-item-content {
        display: flex;
    }
    
    .original-content, .new-content {
        flex: 1;
        padding: 10px;
    }
    
    /* Version tree visualization */
    .version-tree {
        min-height: 400px;
        border: 1px solid var(--bg-color3);
        border-radius: 4px;
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .version-tree-placeholder {
        text-align: center;
        color: var(--text2ndary);
        padding: 100px 0;
    }
    
    .version-tree-legend {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }
    
    .legend-item {
        display: flex;
        align-items: center;
    }
    
    .legend-color {
        display: inline-block;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        margin-right: 8px;
    }
    
    .legend-color.original {
        background-color: var(--highlight);
    }
    
    .legend-color.version {
        background-color: #4CAF50; /* Green */
    }
    
    .legend-color.fork {
        background-color: #2196F3; /* Blue */
    }
    
    .legend-color.merged {
        background-color: #9C27B0; /* Purple */
    }
    </style>
<!-- <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize tabs
            var tabs = document.querySelectorAll('.tabs');
            M.Tabs.init(tabs, {
                swipeable: false
            });
            
            // Initialize dropdowns
            var dropdowns = document.querySelectorAll('.dropdown-trigger');
            M.Dropdown.init(dropdowns, {
                constrainWidth: false,
                coverTrigger: false
            });
            
            // Initialize modals
            var modals = document.querySelectorAll('.modal');
            M.Modal.init(modals);
            
            // Initialize selects
            var selects = document.querySelectorAll('select');
            M.FormSelect.init(selects);
            
            // Toggle custom settings section
            var inheritSettings = document.querySelectorAll('input[name="inherit-settings"]');
            inheritSettings.forEach(function(radio) {
                radio.addEventListener('change', function() {
                    var customSettingsSection = document.getElementById('custom-settings-section');
                    if (this.value === 'custom' || radio.value === 'custom') {
                        customSettingsSection.style.display = 'block';
                    } else {
                        customSettingsSection.style.display = 'none';
                    }
                });
            });
            
            // Toggle selective changes section
            var mergeAllChanges = document.getElementById('merge-all-changes');
            if (mergeAllChanges) {
                mergeAllChanges.addEventListener('change', function() {
                    var selectiveChanges = document.getElementById('selective-changes');
                    if (this.checked) {
                        selectiveChanges.style.display = 'none';
                    } else {
                        selectiveChanges.style.display = 'block';
                    }
                });
            }
        });
</script> -->

{% endblock %}
